<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Matka King</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="admin-panel">
        <div class="container">
            <!-- Admin Header -->
            <div class="admin-header">
                <h1><i class="fas fa-lock"></i> MATKA KING ADMIN PANEL</h1>
                <p>Control results, manage guessers, and monitor activities</p>
                <button id="logout-btn" class="btn btn-danger">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

            <!-- Results Management -->
            <div class="admin-card">
                <h3><i class="fas fa-flag-checkered"></i> MANAGE TODAY'S RESULTS</h3>
                
                <div class="today-date">
                    <i class="fas fa-calendar"></i> Today: <span id="current-date"></span>
                </div>
                
                <div class="results-form-grid">
                    <!-- Faridabad -->
                    <div class="result-set-card">
                        <h4>FARIDABAD (5:15 PM)</h4>
                        <div class="form-group">
                            <label>Result Number (00-99):</label>
                            <input type="text" id="result-faridabad" class="form-control" maxlength="2" 
                                   placeholder="Enter result">
                        </div>
                        <div id="status-faridabad" class="status-badge unpublished">Not Set</div>
                    </div>
                    
                    <!-- Gaziabad -->
                    <div class="result-set-card">
                        <h4>GAZIABAD (9:15 PM)</h4>
                        <div class="form-group">
                            <label>Result Number (00-99):</label>
                            <input type="text" id="result-gaziabad" class="form-control" maxlength="2" 
                                   placeholder="Enter result">
                        </div>
                        <div id="status-gaziabad" class="status-badge unpublished">Not Set</div>
                    </div>
                    
                    <!-- Gali -->
                    <div class="result-set-card">
                        <h4>GALI (10:30 PM)</h4>
                        <div class="form-group">
                            <label>Result Number (00-99):</label>
                            <input type="text" id="result-gali" class="form-control" maxlength="2" 
                                   placeholder="Enter result">
                        </div>
                        <div id="status-gali" class="status-badge unpublished">Not Set</div>
                    </div>
                    
                    <!-- Deshwar -->
                    <div class="result-set-card">
                        <h4>DESHWAR (4:45 PM)</h4>
                        <div class="form-group">
                            <label>Result Number (00-99):</label>
                            <input type="text" id="result-deshwar" class="form-control" maxlength="2" 
                                   placeholder="Enter result">
                        </div>
                        <div id="status-deshwar" class="status-badge unpublished">Not Set</div>
                    </div>
                    
                    <!-- Gali Dubai -->
                    <div class="result-set-card">
                        <h4>GALI DUBAI (2:30 PM)</h4>
                        <div class="form-group">
                            <label>Result Number (00-99):</label>
                            <input type="text" id="result-gali-dubai" class="form-control" maxlength="2" 
                                   placeholder="Enter result">
                        </div>
                        <div id="status-gali_dubai" class="status-badge unpublished">Not Set</div>
                    </div>
                    
                    <!-- Deshwar Dubai -->
                    <div class="result-set-card">
                        <h4>DESHWAR DUBAI (11:45 PM)</h4>
                        <div class="form-group">
                            <label>Result Number (00-99):</label>
                            <input type="text" id="result-deshwar-dubai" class="form-control" maxlength="2" 
                                   placeholder="Enter result">
                        </div>
                        <div id="status-deshwar_dubai" class="status-badge unpublished">Not Set</div>
                    </div>
                </div>
                
                <div class="form-actions" style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="save-results" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Results
                    </button>
                    <button id="publish-results" class="btn btn-success">
                        <i class="fas fa-broadcast-tower"></i> Publish Results
                    </button>
                    <button id="clear-results" class="btn btn-danger">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
            </div>

            <!-- Guesser Management -->
            <div class="admin-card">
                <h3><i class="fas fa-users"></i> MANAGE GUESSERS</h3>
                
                <!-- Add New Guesser -->
                <div class="form-group" style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <div style="flex: 1;">
                        <label>New Guesser ID:</label>
                        <input type="text" id="new-guesser-id" class="form-control" placeholder="G001">
                    </div>
                    <div style="flex: 2;">
                        <label>Guesser Name:</label>
                        <input type="text" id="new-guesser-name" class="form-control" placeholder="Enter name">
                    </div>
                    <div style="align-self: flex-end;">
                        <button id="add-guesser" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add
                        </button>
                    </div>
                </div>
                
                <!-- Guesser List -->
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Guesser ID</th>
                                <th>Name</th>
                                <th>Rating</th>
                                <th>Status</th>
                                <th>Predictions</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="guesser-list">
                            <!-- Guesser rows will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 20px;">
                    <button id="save-guessers" class="btn btn-success">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>

            <!-- System Stats -->
            <div class="admin-card">
                <h3><i class="fas fa-chart-line"></i> SYSTEM STATISTICS</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div class="stat-card">
                        <h4><i class="fas fa-eye"></i> Total Visitors</h4>
                        <div class="stat-number">1,248</div>
                        <div class="stat-change positive">+12% today</div>
                    </div>
                    
                    <div class="stat-card">
                        <h4><i class="fas fa-users"></i> Active Guessers</h4>
                        <div class="stat-number">24</div>
                        <div class="stat-change positive">+3 today</div>
                    </div>
                    
                    <div class="stat-card">
                        <h4><i class="fas fa-flag"></i> Results Today</h4>
                        <div class="stat-number">2/6</div>
                        <div class="stat-change">4 pending</div>
                    </div>
                    
                    <div class="stat-card">
                        <h4><i class="fas fa-bell"></i> Notifications</h4>
                        <div class="stat-number">156</div>
                        <div class="stat-change positive">All sent</div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="admin-card">
                <h3><i class="fas fa-bolt"></i> QUICK ACTIONS</h3>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <a href="index.html" class="btn btn-outline">
                        <i class="fas fa-home"></i> View Site
                    </a>
                    <a href="manage-results.html" class="btn btn-outline">
                        <i class="fas fa-edit"></i> Edit Results
                    </a>
                    <a href="results-history.html" class="btn btn-outline">
                        <i class="fas fa-history"></i> Results History
                    </a>
                    <button class="btn btn-outline" onclick="sendTestNotification()">
                        <i class="fas fa-bell"></i> Test Notification
                    </button>
                    <button class="btn btn-outline" onclick="backupData()">
                        <i class="fas fa-download"></i> Backup Data
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="admin-script.js"></script>
    <script>
        // Set current date
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-IN', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Check if login required
        if (window.location.search.includes('login')) {
            showLoginForm();
        }
        
        function showLoginForm() {
            const html = `
                <div class="modal">
                    <div class="modal-content" style="max-width: 400px;">
                        <h3 style="color: #ff4081; margin-bottom: 20px;">Admin Login</h3>
                        <div class="form-group">
                            <label>Username:</label>
                            <input type="text" id="login-username" class="form-control" placeholder="Enter username">
                        </div>
                        <div class="form-group">
                            <label>Password:</label>
                            <input type="password" id="login-password" class="form-control" placeholder="Enter password">
                        </div>
                        <div style="margin-top: 20px; display: flex; gap: 10px;">
                            <button onclick="attemptLogin()" class="btn btn-primary" style="flex: 1;">Login</button>
                            <button onclick="window.location.href='index.html'" class="btn btn-outline">Cancel</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', html);
        }
        
        function attemptLogin() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            if (username === 'admin' && password === 'matka123') {
                localStorage.setItem('adminLoggedIn', 'true');
                window.location.href = 'admin.html';
            } else {
                alert('Invalid credentials! Try admin / matka123');
            }
        }
        
        function sendTestNotification() {
            alert('Test notification sent to all users!');
        }
        
        function backupData() {
            const results = localStorage.getItem('matkaResults');
            const guessers = localStorage.getItem('matkaGuessers');
            
            const data = {
                results: JSON.parse(results || '{}'),
                guessers: JSON.parse(guessers || '[]'),
                backupTime: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `matka-backup-${new Date().getTime()}.json`;
            a.click();
            
            alert('Backup created successfully!');
        }
    </script>
</body>
</html>
